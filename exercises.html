<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercises - NalediAI Mental Health</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css">
    <link rel="stylesheet" href="css/mobile.css">
    <style>
        :root {
            --bg-primary: #13131a;
            --bg-secondary: #1c1c24;
            --text-primary: #ffffff;
            --text-secondary: #a0aec0;
        }

        .light-mode {
            --bg-primary: #f7fafc;
            --bg-secondary: #ffffff;
            --text-primary: #1a202c;
            --text-secondary: #4a5568;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s;
        }

        .theme-card {
            background-color: var(--bg-secondary);
        }

        /* Navigation Styles */
        .nav-link {
            color: var(--text-primary);
            font-weight: 500;
            display: flex;
            align-items: center;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            color: #22c55e;
            background-color: rgba(34, 197, 94, 0.1);
        }

        .nav-link i {
            margin-right: 0.5rem;
            font-size: 1.25rem;
        }

        /* Toggle Switch Styles */
        .toggle-switch {
            width: 50px;
            height: 25px;
            position: relative;
            display: inline-block;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #4a5568;
            transition: 0.4s;
            border-radius: 25px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 19px;
            width: 19px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: #22c55e;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(25px);
        }

        .toggle-icon {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1;
            color: var(--text-primary);
            font-size: 14px;
        }

        .sun-icon {
            right: 7px;
        }

        .moon-icon {
            left: 7px;
        }

        /* Exercise Card Styles */
        .exercise-card {
            transition: transform 0.3s ease;
        }

        .exercise-card:hover {
            transform: translateY(-5px);
        }

        /* Category Tab Styles */
        .category-tab {
            transition: all 0.3s ease;
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .category-tab.active {
            background-color: #22c55e;
            color: white;
        }

        .category-tab:hover:not(.active) {
            color: #22c55e;
            background-color: rgba(34, 197, 94, 0.1);
        }

        .categories-scroll {
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .categories-scroll::-webkit-scrollbar {
            display: none;
        }

        @media (max-width: 640px) {
            .categories-scroll {
                margin: 0 -1rem;
                padding: 0 1rem;
            }
            .category-tab {
                padding: 0.5rem 0.75rem;
                font-size: 0.875rem;
            }
        }

        /* Active Status Dot Animation */
        .active-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .active-dot {
            width: 8px;
            height: 8px;
            background-color: #22c55e;
            border-radius: 50%;
            position: relative;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(34, 197, 94, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
            }
        }

        .active-dot::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background-color: #22c55e;
            opacity: 0.7;
            animation: pulse 2s infinite;
        }

        .active-dot::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background-color: #22c55e;
            opacity: 0.3;
            animation: pulse 2s infinite;
            animation-delay: 0.5s;
        }

        /* Grid Button Styles */
        .grid-buttons {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 0.4rem;
            padding: 0.4rem;
            width: 100%;
            max-width: 1200px;
            margin: 0.5rem auto;
            margin-top: 3.5rem;
        }

        .grid-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .grid-button i {
            font-size: 1.1rem;
            margin-bottom: 0.2rem;
            color: #22c55e;
        }

        .grid-button span {
            font-weight: 500;
            font-size: 0.7rem;
            color: var(--text-primary);
        }

        @media (max-width: 768px) {
            .grid-buttons {
                grid-template-columns: repeat(3, 1fr);
                gap: 0.3rem;
                padding: 0.3rem;
                margin: 0.25rem auto;
                margin-top: 3rem;
            }
            
            .grid-button {
                padding: 0.35rem;
                min-height: 3.5rem;
            }
            
            .grid-button i {
                font-size: 0.85rem;
                margin-bottom: 0.15rem;
            }
            
            .grid-button span {
                font-size: 0.6rem;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                width: 100%;
                padding: 0 0.1rem;
            }
        }

        @media (max-width: 360px) {
            .grid-buttons {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Header Styles */
        header {
            height: 2.5rem;
        }

        header .container {
            height: 100%;
        }

        .profile-btn {
            padding: 0.35rem 0.75rem;
            font-size: 0.875rem;
        }

        .profile-btn i {
            font-size: 1rem;
        }

        /* Breathing Exercise Popup Styles */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .popup-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .popup-content {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            width: 90%;
            max-width: 800px;
            background: var(--bg-secondary);
            border-radius: 1rem;
            padding: 2rem;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .popup-content.active {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .slideshow-container {
            position: relative;
            width: 100%;
            height: 400px;
            overflow: hidden;
            border-radius: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
            background: rgba(34, 197, 94, 0.1);
        }

        .slide.active {
            opacity: 1;
        }

        .slide-icon {
            font-size: 4rem;
            color: #22c55e;
            margin-bottom: 1rem;
        }

        .slide-nav {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .slide-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .slide-dot.active {
            background: #22c55e;
            transform: scale(1.2);
        }

        .popup-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }

        .popup-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .popup-close:hover {
            color: var(--text-primary);
        }

        /* Gratitude Journal Styles */
        .gratitude-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(8px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .gratitude-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .gratitude-container {
            position: relative;
            width: 90%;
            max-width: 600px;
            background: var(--bg-secondary);
            border-radius: 1.5rem;
            padding: 2rem;
            transform: scale(0.8);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .gratitude-container.active {
            transform: scale(1);
            opacity: 1;
        }

        .gratitude-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
            width: 100%;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .gratitude-input:focus {
            outline: none;
            border-color: #22c55e;
            background: rgba(34, 197, 94, 0.05);
        }

        .gratitude-input::placeholder {
            color: rgba(255, 255, 255, 0.3);
        }

        .gratitude-progress {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 1.5rem 0;
        }

        .progress-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: #22c55e;
            transform: scale(1.5);
        }

        .celebration {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            text-align: center;
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .celebration.active {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        .celebration-icon {
            font-size: 4rem;
            color: #22c55e;
            margin-bottom: 1rem;
            animation: bounce 1s infinite;
        }

        @keyframes confetti {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #22c55e;
            animation: confetti 4s ease-in-out infinite;
        }

        /* Button Animations */
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(34, 197, 94, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-5px);
            }
        }

        .exercise-button {
            animation: pulse 2s infinite;
            transition: all 0.3s ease;
        }

        .exercise-button:hover {
            animation: bounce 0.5s ease;
            transform: translateY(-2px);
            background: #22c55e !important;
        }

        .exercise-button:active {
            transform: scale(0.95);
        }

        .button-click-effect {
            position: relative;
            overflow: hidden;
        }

        .button-click-effect::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }

        .button-click-effect:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(100, 100);
                opacity: 0;
            }
        }

        .popup-content {
            animation: slideIn 0.5s ease forwards;
        }

        @keyframes slideIn {
            from {
                transform: translate(-50%, -60%) scale(0.8);
                opacity: 0;
            }
            to {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        .slide {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .slide.active {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Add glowing community button styles */
        .community-button {
            position: relative;
            overflow: hidden;
        }

        .community-button::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #22c55e, #16a34a, #15803d);
            border-radius: 0.75rem;
            z-index: -2;
            animation: glowing 3s linear infinite;
        }

        .community-button::after {
            content: '';
            position: absolute;
            inset: 1px;
            background: var(--bg-secondary);
            border-radius: 0.75rem;
            z-index: -1;
            transition: background-color 0.3s ease;
        }

        .community-button:hover::after {
            background: rgba(34, 197, 94, 0.1);
        }

        @keyframes glowing {
            0% {
                filter: hue-rotate(0deg) blur(5px);
            }
            100% {
                filter: hue-rotate(360deg) blur(5px);
            }
        }

        .community-button .icon {
            transition: all 0.3s ease;
        }

        .community-button:hover .icon {
            transform: scale(1.2);
        }

        .community-button .dot {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            width: 8px;
            height: 8px;
            background: #22c55e;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
            }
            70% {
                transform: scale(1);
                box-shadow: 0 0 0 6px rgba(34, 197, 94, 0);
            }
            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
            }
        }
    </style>
</head>
<body>
    <!-- Header with Theme Toggle and Profile -->
    <header class="fixed w-full top-0 z-50 theme-card shadow-lg header-animate">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-full">
                <!-- Logo -->
                <div class="flex items-center">
                    <h1 class="text-xl font-bold">NalediAI</h1>
                </div>

                <!-- Right Side Controls -->
                <div class="flex items-center space-x-4">
                    <!-- Active Status Dot -->
                    <div class="active-status">
                        <div class="active-dot"></div>
                        <span class="text-xs text-gray-400">Active</span>
                    </div>

                    <!-- Theme Toggle -->
                    <div class="flex items-center">
                        <label class="toggle-switch">
                            <input type="checkbox" id="themeToggle">
                            <span class="toggle-slider">
                                <i class="ti ti-sun toggle-icon sun-icon"></i>
                                <i class="ti ti-moon toggle-icon moon-icon"></i>
                            </span>
                        </label>
                    </div>

                    <!-- Profile/Logout Button -->
                    <div class="relative">
                        <button id="profileBtn" class="profile-btn flex items-center space-x-2 rounded-lg bg-green-600 hover:bg-green-700 text-white transition-all duration-300">
                            <i class="ti ti-user"></i>
                            <span>Logout</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Buttons -->
    <div class="mt-12"> 
        <div class="grid-buttons">
            <a href="chat.html" class="grid-button">
                <i class="ti ti-messages"></i>
                <span>Chat</span>
            </a>
            <a href="incognito-chat.html" class="grid-button">
                <i class="ti ti-message-off"></i>
                <span>Incognito Chat</span>
            </a>
            <a href="wearables.html" class="grid-button">
                <i class="ti ti-device-watch"></i>
                <span>Wearables</span>
            </a>
            <a href="exercises.html" class="grid-button">
                <i class="ti ti-activity"></i>
                <span>Exercises</span>
            </a>
            <a href="crisis-resources.html" class="grid-button">
                <i class="ti ti-emergency-bed"></i>
                <span>Crisis Resources</span>
            </a>
            <a href="#" class="grid-button">
                <i class="ti ti-books"></i>
                <span>Resources</span>
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 pt-20">
        <div class="exercises-container">
            <h1 class="text-2xl font-bold mb-6">Mental Wellness Exercises</h1>
            
            <!-- Exercise Categories -->
            <div class="categories-scroll overflow-x-auto pb-2 mb-6">
                <div class="flex space-x-4">
                    <button class="category-tab active whitespace-nowrap">
                        <i class="ti ti-layout-grid"></i>
                        All Exercises
                    </button>
                    <button class="category-tab whitespace-nowrap">
                        <i class="ti ti-brain"></i>
                        Meditation
                    </button>
                    <button class="category-tab whitespace-nowrap">
                        <i class="ti ti-wind"></i>
                        Breathing
                    </button>
                    <button class="category-tab whitespace-nowrap">
                        <i class="ti ti-focus"></i>
                        Mindfulness
                    </button>
                    <button class="category-tab whitespace-nowrap">
                        <i class="ti ti-notebook"></i>
                        Journaling
                    </button>
                </div>
            </div>

            <!-- Exercise Cards Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
                <!-- Exercise Card 1 -->
                <div class="exercise-card theme-card p-4 rounded-xl">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-semibold">Deep Breathing</h3>
                        <span class="text-sm text-green-500">5 mins</span>
                    </div>
                    <p class="text-gray-400 text-sm mb-4">Simple breathing exercise to reduce stress and anxiety.</p>
                    <button onclick="openBreathingPopup()" class="exercise-button button-click-effect w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-all">
                        Start Exercise
                    </button>
                </div>

                <!-- Exercise Card 2 -->
                <div class="exercise-card theme-card p-4 rounded-xl">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-semibold">Body Scan Meditation</h3>
                        <span class="text-sm text-green-500">10 mins</span>
                    </div>
                    <p class="text-gray-400 text-sm mb-4">A guided meditation to help you relax and release tension throughout your body.</p>
                    <button class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-all">
                        Start Exercise
                    </button>
                </div>

                <!-- Exercise Card 3 -->
                <div class="exercise-card theme-card p-4 rounded-xl">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-semibold">Gratitude Journal</h3>
                        <span class="text-sm text-green-500">15 mins</span>
                    </div>
                    <p class="text-gray-400 text-sm mb-4">Practice gratitude by writing down three things you're thankful for today.</p>
                    <button onclick="openGratitudeJournal()" class="exercise-button button-click-effect w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-all">
                        Start Exercise
                    </button>
                </div>
            </div>

            <!-- Progress Section -->
            <div class="progress-section theme-card rounded-xl p-4 md:p-6 mb-8">
                <h2 class="text-xl font-bold mb-4">Your Progress</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="progress-card bg-green-600/10 rounded-lg p-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm">Daily Goal</span>
                            <span class="text-green-500">80%</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div class="bg-green-500 rounded-full h-2" style="width: 80%"></div>
                        </div>
                    </div>
                    <div class="progress-card bg-blue-600/10 rounded-lg p-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm">Streak</span>
                            <span class="text-blue-500">5 days</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <div class="w-8 h-1 bg-blue-500 rounded"></div>
                            <div class="w-8 h-1 bg-blue-500 rounded"></div>
                            <div class="w-8 h-1 bg-blue-500 rounded"></div>
                            <div class="w-8 h-1 bg-blue-500 rounded"></div>
                            <div class="w-8 h-1 bg-blue-500 rounded"></div>
                            <div class="w-8 h-1 bg-gray-300 rounded"></div>
                            <div class="w-8 h-1 bg-gray-300 rounded"></div>
                        </div>
                    </div>
                    <div class="progress-card bg-purple-600/10 rounded-lg p-4">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm">Total Time</span>
                            <span class="text-purple-500">125 minutes</span>
                        </div>
                        <p class="text-sm text-gray-400">This week</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Breathing Exercise Popup -->
    <div id="breathingPopup" class="popup-overlay">
        <div class="popup-content">
            <i class="ti ti-x popup-close" onclick="closeBreathingPopup()"></i>
            <h2 class="text-2xl font-bold mb-4">Mindful Breathing Techniques</h2>
            
            <div class="slideshow-container">
                <!-- Slide 1: Box Breathing -->
                <div class="slide active">
                    <i class="ti ti-box slide-icon"></i>
                    <h3 class="text-xl font-semibold mb-2">Box Breathing</h3>
                    <p class="text-gray-400 mb-4">Inhale for 4 counts, hold for 4, exhale for 4, hold for 4.</p>
                    <div class="text-green-500 text-sm">Perfect for reducing stress and anxiety</div>
                </div>

                <!-- Slide 2: 4-7-8 Breathing -->
                <div class="slide">
                    <i class="ti ti-wind slide-icon"></i>
                    <h3 class="text-xl font-semibold mb-2">4-7-8 Breathing</h3>
                    <p class="text-gray-400 mb-4">Inhale for 4, hold for 7, exhale for 8 counts.</p>
                    <div class="text-green-500 text-sm">Helps with sleep and relaxation</div>
                </div>

                <!-- Slide 3: Belly Breathing -->
                <div class="slide">
                    <i class="ti ti-lungs slide-icon"></i>
                    <h3 class="text-xl font-semibold mb-2">Belly Breathing</h3>
                    <p class="text-gray-400 mb-4">Deep breaths from your diaphragm, expanding your belly.</p>
                    <div class="text-green-500 text-sm">Great for deep relaxation and stress relief</div>
                </div>
            </div>

            <div class="slide-nav">
                <div class="slide-dot active" onclick="showSlide(0)"></div>
                <div class="slide-dot" onclick="showSlide(1)"></div>
                <div class="slide-dot" onclick="showSlide(2)"></div>
            </div>

            <div class="popup-buttons">
                <button onclick="window.location.href='breathing.html'" class="exercise-button button-click-effect px-6 py-2 bg-green-600/20 text-green-500 rounded-lg hover:bg-green-600/30 transition-all">
                    View All Techniques
                </button>
                <button onclick="startBreathingExercise()" class="exercise-button button-click-effect px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all">
                    Start Practice
                </button>
            </div>
        </div>
    </div>

    <!-- Gratitude Journal Popup -->
    <div id="gratitudeJournal" class="gratitude-overlay">
        <div class="gratitude-container">
            <button class="close-button" onclick="closeGratitudeJournal()">
                <i class="ti ti-x"></i>
            </button>
            
            <div class="journal-content">
                <h2 class="text-2xl font-bold mb-4">Gratitude Journal</h2>
                <p class="text-gray-400 mb-6">Take a moment to reflect on the things you're grateful for today.</p>
                
                <div class="gratitude-entries">
                    <div class="entry">
                        <label class="text-sm text-gray-400 mb-2">I am grateful for...</label>
                        <textarea class="gratitude-input" rows="3" placeholder="Write your first gratitude entry here..."></textarea>
                    </div>
                </div>

                <div class="gratitude-progress">
                    <div class="progress-dot active"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                </div>

                <button onclick="nextGratitudeEntry()" class="exercise-button button-click-effect w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-all mt-4">
                    Continue
                </button>
            </div>

            <div class="celebration">
                <i class="ti ti-confetti celebration-icon"></i>
                <h3 class="text-2xl font-bold mb-2">Well Done!</h3>
                <p class="text-gray-400 mb-4">You've completed today's gratitude practice.</p>
                <div class="flex gap-3">
                    <button onclick="window.location.href='journals.html'" class="exercise-button button-click-effect px-6 py-2 bg-green-600/20 text-green-500 rounded-lg hover:bg-green-600/30 transition-all">
                        View All Journals
                    </button>
                    <button onclick="closeGratitudeJournal()" class="exercise-button button-click-effect px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Theme Toggle Functionality
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;

        // Check for saved theme preference
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'light') {
            body.classList.add('light-mode');
            themeToggle.checked = true;
        }

        themeToggle.addEventListener('change', () => {
            if (themeToggle.checked) {
                body.classList.add('light-mode');
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.remove('light-mode');
                localStorage.setItem('theme', 'dark');
            }
        });

        // Category Tab Functionality
        const categoryTabs = document.querySelectorAll('.category-tab');
        categoryTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                categoryTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
            });
        });

        // Profile/Logout Button
        document.getElementById('profileBtn').addEventListener('click', () => {
            localStorage.removeItem('userData');
            localStorage.removeItem('sessionActive');
            sessionStorage.removeItem('sessionActive');
            window.location.href = 'signin.html';
        });

        // Check if user is logged in
        function checkAuth() {
            const isLoggedIn = localStorage.getItem('sessionActive') || sessionStorage.getItem('sessionActive');
            if (!isLoggedIn) {
                window.location.href = 'signin.html';
            }
        }

        // Run auth check when page loads
        checkAuth();

        // Breathing Exercise Popup Functions
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const dots = document.querySelectorAll('.slide-dot');

        function openBreathingPopup() {
            document.getElementById('breathingPopup').classList.add('active');
            setTimeout(() => {
                document.querySelector('.popup-content').classList.add('active');
            }, 100);
        }

        function closeBreathingPopup() {
            document.querySelector('.popup-content').classList.remove('active');
            setTimeout(() => {
                document.getElementById('breathingPopup').classList.remove('active');
            }, 300);
        }

        function showSlide(index) {
            slides[currentSlide].classList.remove('active');
            dots[currentSlide].classList.remove('active');
            currentSlide = index;
            slides[currentSlide].classList.add('active');
            dots[currentSlide].classList.add('active');
        }

        // Auto-advance slides
        setInterval(() => {
            let nextSlide = (currentSlide + 1) % slides.length;
            showSlide(nextSlide);
        }, 5000);

        // Close popup when clicking outside
        document.getElementById('breathingPopup').addEventListener('click', function(e) {
            if (e.target === this) {
                closeBreathingPopup();
            }
        });

        function startBreathingExercise() {
            const button = document.querySelector('.popup-buttons .exercise-button:last-child');
            button.classList.add('animate-click');
            setTimeout(() => {
                button.classList.remove('animate-click');
            }, 200);
            
            // Add your breathing exercise implementation here
            console.log('Starting breathing exercise...');
        }

        // Gratitude Journal Functions
        let currentEntry = 0;
        const gratitudeEntries = [];

        function saveGratitudeEntry() {
            const date = new Date();
            const entry = {
                date: date.toISOString(),
                entries: [...gratitudeEntries],
                id: date.getTime()
            };

            // Get existing entries
            let savedEntries = JSON.parse(localStorage.getItem('gratitudeJournals') || '[]');
            savedEntries.push(entry);
            
            // Save to localStorage
            localStorage.setItem('gratitudeJournals', JSON.stringify(savedEntries));
        }

        function openGratitudeJournal() {
            const overlay = document.getElementById('gratitudeJournal');
            const container = overlay.querySelector('.gratitude-container');
            
            overlay.classList.add('active');
            setTimeout(() => container.classList.add('active'), 100);

            // Reset state
            currentEntry = 0;
            gratitudeEntries.length = 0;
            updateGratitudeProgress();
            
            // Show journal content, hide celebration
            overlay.querySelector('.journal-content').style.display = 'block';
            overlay.querySelector('.celebration').classList.remove('active');
            
            // Clear and focus input
            const input = overlay.querySelector('.gratitude-input');
            input.value = '';
            setTimeout(() => input.focus(), 500);
        }

        function closeGratitudeJournal() {
            const overlay = document.getElementById('gratitudeJournal');
            const container = overlay.querySelector('.gratitude-container');
            
            container.classList.remove('active');
            setTimeout(() => overlay.classList.remove('active'), 500);
        }

        function nextGratitudeEntry() {
            const overlay = document.getElementById('gratitudeJournal');
            const input = overlay.querySelector('.gratitude-input');
            const content = overlay.querySelector('.journal-content');
            const celebration = overlay.querySelector('.celebration');

            if (input.value.trim() === '') {
                input.classList.add('shake');
                setTimeout(() => input.classList.remove('shake'), 500);
                return;
            }

            gratitudeEntries.push(input.value);
            currentEntry++;

            if (currentEntry >= 3) {
                // Save entries
                saveGratitudeEntry();
                
                // Show celebration
                content.style.display = 'none';
                celebration.classList.add('active');
                
                // Create confetti
                for (let i = 0; i < 50; i++) {
                    createConfetti();
                }

                return;
            }

            // Prepare next entry
            input.value = '';
            input.placeholder = `Write your ${currentEntry + 1}${currentEntry === 1 ? 'nd' : 'rd'} gratitude entry here...`;
            updateGratitudeProgress();
            
            // Focus input with animation
            input.classList.add('fade-in');
            setTimeout(() => {
                input.classList.remove('fade-in');
                input.focus();
            }, 500);
        }

        function updateGratitudeProgress() {
            const dots = document.querySelectorAll('.progress-dot');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index <= currentEntry);
            });
        }

        function createConfetti() {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
            confetti.style.opacity = Math.random();
            confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
            
            document.body.appendChild(confetti);
            
            setTimeout(() => confetti.remove(), 5000);
        }

        // Add ripple effect to buttons
        function createRipple(event) {
            const button = event.currentTarget;
            const ripple = document.createElement('span');
            const diameter = Math.max(button.clientWidth, button.clientHeight);
            const radius = diameter / 2;

            ripple.style.width = ripple.style.height = `${diameter}px`;
            ripple.style.left = `${event.clientX - button.offsetLeft - radius}px`;
            ripple.style.top = `${event.clientY - button.offsetTop - radius}px`;
            ripple.className = 'ripple';

            button.appendChild(ripple);

            setTimeout(() => {
                ripple.remove();
            }, 600);
        }

        // Add click effect to all exercise buttons
        document.querySelectorAll('.exercise-button').forEach(button => {
            button.addEventListener('click', createRipple);
        });
    </script>
</body>
</html>
